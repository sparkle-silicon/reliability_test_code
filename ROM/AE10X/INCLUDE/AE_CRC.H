/*
 * @Author: daweslinyu daowes.ly@qq.com
 * @Date: 2024-08-09 15:17:19
 * @LastEditors: daweslinyu daowes.ly@qq.com
 * @LastEditTime: 2024-08-09 16:52:22
 * @FilePath: /ROM/AE10X/INCLUDE/AE_CRC.H
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 */
#ifndef _AE_CRC_H
#define _AE_CRC_H
#include <AE_GLOBAL.H>
#include <AE_REG.H>
#include <AE_CONFIG.H>

#define CRC32_XFER_INIT 0x00000000U
#define CRC32_XFER_POLY 0x000000AFU
#define CRC32_XFER_REVERSAL_IN FALSE
#define CRC32_XFER_REVERSAL_OUT FALSE
#define CRC32_XFER_XOROUT 0x00000000U
#define CRC32_XFER_CHECK 0xbd0be338U
#define CRC32_XFER_RESIDUE 0x00000000U

#define CRC32_MPEG2_INIT 0xffffffffU
#define CRC32_MPEG2_POLY 0x04c11db7U
#define CRC32_MPEG2_REVERSAL_IN FALSE
#define CRC32_MPEG2_REVERSAL_OUT FALSE
#define CRC32_MPEG2_XOROUT 0x00000000U
#define CRC32_MPEG2_CHECK 0x0376e6e7U
#define CRC32_MPEG2_RESIDUE 0x00000000U

#define CRC32_MEF_INIT 0xffffffffU
#define CRC32_MEF_POLY 0x741b8cd7U
#define CRC32_MEF_REVERSAL_IN TRUE
#define CRC32_MEF_REVERSAL_OUT TRUE
#define CRC32_MEF_XOROUT 0x00000000U
#define CRC32_MEF_CHECK 0xd2c22f51U
#define CRC32_MEF_RESIDUE 0x00000000U

#define CRC32_JAMCRC_INIT 0xffffffffU
#define CRC32_JAMCRC_POLY 0x04c11db7U
#define CRC32_JAMCRC_REVERSAL_IN TRUE
#define CRC32_JAMCRC_REVERSAL_OUT TRUE
#define CRC32_JAMCRC_XOROUT 0x00000000U
#define CRC32_JAMCRC_CHECK 0x340bc6d9U
#define CRC32_JAMCRC_RESIDUE 0x00000000U

#define CRC32_ISOHDLC_INIT 0xffffffffU
#define CRC32_ISOHDLC_POLY 0x04c11db7U
#define CRC32_ISOHDLC_REVERSAL_IN TRUE
#define CRC32_ISOHDLC_REVERSAL_OUT TRUE
#define CRC32_ISOHDLC_XOROUT 0xffffffffU
#define CRC32_ISOHDLC_CHECK 0xcbf43926U
#define CRC32_ISOHDLC_RESIDUE 0xdebb20e3U

#define CRC32_ISCSI_INIT 0xffffffffU
#define CRC32_ISCSI_POLY 0x1edc6f41U
#define CRC32_ISCSI_REVERSAL_IN TRUE
#define CRC32_ISCSI_REVERSAL_OUT TRUE
#define CRC32_ISCSI_XOROUT 0xffffffffU
#define CRC32_ISCSI_CHECK 0xe3069283U
#define CRC32_ISCSI_RESIDUE 0xb798b438U

#define CRC32_CKSUM_INIT 0x00000000U
#define CRC32_CKSUM_POLY 0x04c11db7U
#define CRC32_CKSUM_REVERSAL_IN FALSE
#define CRC32_CKSUM_REVERSAL_OUT FALSE
#define CRC32_CKSUM_XOROUT 0xffffffffU
#define CRC32_CKSUM_CHECK 0x765e7680U
#define CRC32_CKSUM_RESIDUE 0xc704dd7bU

#define CRC32_CDROMEDC_INIT 0x00000000U
#define CRC32_CDROMEDC_POLY 0x8001801bU
#define CRC32_CDROMEDC_REVERSAL_IN TRUE
#define CRC32_CDROMEDC_REVERSAL_OUT TRUE
#define CRC32_CDROMEDC_XOROUT 0x00000000U
#define CRC32_CDROMEDC_CHECK 0x6ec2edc4U
#define CRC32_CDROMEDC_RESIDUE 0x00000000U

#define CRC32_BZIP2_INIT 0xffffffffU
#define CRC32_BZIP2_POLY 0x04c11db7U
#define CRC32_BZIP2_REVERSAL_IN FALSE
#define CRC32_BZIP2_REVERSAL_OUT FALSE
#define CRC32_BZIP2_XOROUT 0xffffffffU
#define CRC32_BZIP2_CHECK 0xfc891918U
#define CRC32_BZIP2_RESIDUE 0xc704dd7bU

#define CRC32_BASE91D_INIT 0xffffffffU
#define CRC32_BASE91D_POLY 0xa833982bU
#define CRC32_BASE91D_REVERSAL_IN TRUE
#define CRC32_BASE91D_REVERSAL_OUT TRUE
#define CRC32_BASE91D_XOROUT 0xffffffffU
#define CRC32_BASE91D_CHECK 0x87315576U
#define CRC32_BASE91D_RESIDUE 0x45270551U

#define CRC32_AUTOSAR_INIT 0xffffffffU
#define CRC32_AUTOSAR_POLY 0xf4acfb13U
#define CRC32_AUTOSAR_REVERSAL_IN TRUE
#define CRC32_AUTOSAR_REVERSAL_OUT TRUE
#define CRC32_AUTOSAR_XOROUT 0xffffffffU
#define CRC32_AUTOSAR_CHECK 0x1697d06aU
#define CRC32_AUTOSAR_RESIDUE 0x904cddbfU

#define CRC32_AIXM_INIT 0x00000000U
#define CRC32_AIXM_POLY 0x814141abU
#define CRC32_AIXM_REVERSAL_IN FALSE
#define CRC32_AIXM_REVERSAL_OUT FALSE
#define CRC32_AIXM_XOROUT 0x00000000U
#define CRC32_AIXM_CHECK 0x3010bf7fU
#define CRC32_AIXM_RESIDUE 0x00000000U

#define CRC32_INIT 0xFFFFFFFFU
#define CRC32_POLY 0x04C11DB7U
#define CRC32_REFPOLY 0xEDB88320U
#define CRC32_REVERSAL_IN TRUE
#define CRC32_REVERSAL_OUT TRUE
#define CRC32_XOROUT 0xFFFFFFFFU
#define CRC32_CHECK 0x3010bf7fU
#define CRC32_RESIDUE 0x00000000U

// #define CRC32_POLY 0xEDB88320U
// #define CRC322_POLY 0xDB710641U
// #define CRC3222_POLY 0x82608EDBU


#define CRC_DEFAULT_INIT CRC32_INIT
#define CRC_DEFAULT_POLY CRC32_POLY
#define CRC_DEFAULT_REFIN CRC32_REVERSAL_IN
#define CRC_DEFAULT_REFOUT CRC32_REVERSAL_OUT
#define CRC_DEFAULT_XOROUT CRC32_XOROUT

#define CRC32INLINE(bytes,size) ({const uint8_t *byte = bytes;\
uint32_t crc = CRC_DEFAULT_INIT;\
for(size_t i = 0; i < len; ++i)\
{\
    crc ^= byte[i];\
    for(int j = 0; j < 8; j++)\
    {\
        if(crc & 1)\
        {\
            crc = (crc >> 1) ^ CRC32_REFPOLY;\
        }\
        else\
        {\
            crc >>= 1;\
        }\
    }\
}\
~crc; })
extern uint32_t CRC32(const void *read, size_t len);
#endif