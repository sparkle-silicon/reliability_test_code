@echo off
REM ***********************************************************************************************************
REM	Setting
REM ***********************************************************************************************************
REM -----------------------------------------------------------------------------------------------------------
REM (64, 96, 128, and 160 are valid)
::	path=D:\Program File\nuclei_riscv_newlibc_prebuilt_win32_2020.07\gcc\bin;
REM -----------------------------------------------------------------------------------------------------------
REM ***********************************************************************************************************
REM	Parameter
REM ***********************************************************************************************************
REM -----------------------------------------------------------------------------------------------------------
IF  "%1" == ""     GOTO BUILD
IF  "%1" == "all"     GOTO BUILD
IF  "%1" == "ALL"     GOTO BUILD
IF  "%1" == "compile"     GOTO BUILD
IF  "%1" == "?"    GOTO OPTIONS
IF  "%1" == "clear"   GOTO clear
IF  "%1" == "CLEAR"   GOTO clear
IF  "%1" == "clean"   GOTO clean
IF  "%1" == "CLEAN"   GOTO clean
IF  "%1" == "release"   GOTO release

REM ***********************************************************************************************************
REM	makefile
REM ***********************************************************************************************************
:build
make compile -j4
GOTO done
:OPTIONS
cls
ECHO    ************************************************************************************
ECHO    *                    Embedded Controller  SPK32 Series Firmware                    *
ECHO    * Copyright Â©2021-2025 Sparkle Silicon Technology Corp., Ltd. All Rights Reserved. *
ECHO    ************************************************************************************
ECHO.    
ECHO.
GOTO done
REM ***********************************************************************************************************
REM	To clear obj, lst, and bin files.
REM ***********************************************************************************************************
:clear
:clean
make clean -j4
GOTO done
REM ***********************************************************************************************************
REM	To release the firmware files.
REM ***********************************************************************************************************
:release
make compile -j4
del /q /f  .\AE10X\libWinAE10X.a
for %%f in (.\AE10X\*.o) do (
    riscv-nuclei-elf-gcc-ar -r .\AE10X\libWinAE10X.a %%f
)
@REM for %%f in (.\KERNEL\*.o) do (
@REM     riscv-nuclei-elf-gcc-ar -r .\KERNEL\libWinKERNEL.a %%f
@REM )
make release -j4
make clean -j4
GOTO done
::-----------------------------------------------------------
:: Done
::-----------------------------------------------------------
:done
::pause
@echo on